"use strict";(self.webpackChunkcode=self.webpackChunkcode||[]).push([[85],{3180:function(e,n,s){s.r(n),s.d(n,{default:function(){return D}});var a,t,i=s.p+"static/media/login-register.113ae40e5e0c435610be.jpg",o=s(6949),c=s(1413),r=s(885),d=s(227),l=s(925),u=s(8977),g=s(168),f=s(7743),m=(0,f.Ps)(a||(a=(0,g.Z)(["\n    mutation {\n        generateUUID {\n            webUUID\n            authorization\n        }\n    }\n"]))),h=(0,f.Ps)(t||(t=(0,g.Z)(["\n    mutation loginByPassCode ($passCode: String!, $uuid: String!) {\n        loginByPassCode (passCode: $passCode, uuid: $uuid) {\n            firstName\n            lastName\n            email\n            phone\n            akcessId\n        }\n    }\n"]))),x=s(9109),j=s(2791),v=(0,s(4428).io)("https://mobile.akcess.dev:3000",{transports:["websocket"]});v.on("connect",(function(){console.log("Socket connected",v.id)})),v.on("error",(function(e){console.log("Socket connection err",e.message)}));var U=v,p=s(5429),b=s(9690),k=s(5318),C=s(4376),N=s(184),w=[{label:"AKcess OTP",id:"passCode",defaultValue:"",type:"password",maxLength:5,required:!0,hint:"Please provide `AKcess OTP` same as your Phone."}],y=(0,d.W)((function(e){var n=e.navigate,s=(0,j.useState)(!0),a=(0,r.Z)(s,2),t=a[0],i=a[1],o=(0,j.useRef)(),d=(0,C.D)(m,{notifyOnNetworkStatusChange:!0,onCompleted:function(e){var n=e.generateUUID;U.emit("UUID",n.webUUID),(0,p.aO)(n.authorization)}}),g=(0,r.Z)(d,2),f=g[0],v=g[1],y=(0,C.D)(h,{notifyOnNetworkStatusChange:!0,onCompleted:function(e){var n=e.loginByPassCode;Z(n)}}),D=(0,r.Z)(y,2),S=D[0],I=D[1],O=(0,j.useContext)(b.nn).loginDispatch;(0,j.useEffect)((function(){f(),U.on("QR_SCAN_STATUS",(function(e){P(e)}))}),[]);var P=function(e){if("none"===e.auth)return Z(e.user);i(!1)},Z=function(e){(0,p.P)(e),O({type:"LOGIN"}),n("/")},L=function(){(0,p.kS)(),O({type:"LOGOUT"}),f()},z=function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"d-flex justify-content-center",children:[v.loading&&(0,N.jsx)(x.O,{width:50,height:50}),!v.loading&&v.data&&(0,N.jsx)(l.Z,{size:128,value:JSON.stringify({webUUID:v.data.generateUUID.webUUID})})]}),!v.loading&&v.data&&(0,N.jsx)(u.s,{onClick:L,label:"Refresh QR code?",variant:"warning",icon:"refresh"})]})},T=function(){var e=o.current.onSubmit();e&&S({variables:(0,c.Z)((0,c.Z)({},e),{},{uuid:v.data.generateUUID.webUUID})})},A=function(){return(0,N.jsxs)("div",{children:[(0,N.jsx)(k.F,{fields:w,ref:o}),(0,N.jsx)("div",{className:"d-flex justify-content-end",children:I.loading?(0,N.jsx)(x.O,{}):(0,N.jsx)(u.s,{icon:"sign-in",label:"Login",variant:"success",onClick:T})})]})};return(0,N.jsx)("div",{className:"vstack gap-5",children:t?(0,N.jsx)(z,{}):(0,N.jsx)(A,{})})})),D=function(){return(0,N.jsx)("div",{className:"container",children:(0,N.jsxs)("div",{className:"row shadow-sm",children:[(0,N.jsx)("div",{className:"col-md-7 d-none d-sm-block",children:(0,N.jsx)("img",{src:i,className:"img-fluid",alt:"Login",loading:"lazy"})}),(0,N.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,N.jsx)("img",{src:o,className:"rounded mx-auto d-block my-5",alt:"Logo",loading:"lazy"}),(0,N.jsx)(y,{})]})]})})}}}]);
//# sourceMappingURL=85.da245851.chunk.js.map